<html>
  <head>
    <title>
      IDK
    </title>
    <style>
      *{
        background:black;
        color: white;
        font-size:2rem;
      }
      #logoIni{
        font-size: 111px;
      }
      #preInicio{
        /*margin: auto;*/
      }
      #board{
        text-align: center;
      }
      #video{
        display: none;
      }
    </style>
  </head>  
  <body>
    <div id="musicas">
      <audio id="drums" src="Jumanji_1995_Drums_SFX_Sound_Effect.mp3" loop allow="autoplay" autoplay="true"></audio>
    </div>
 
    <div id="board">
      <br>
      <br>
      <button id="preInicio" onclick="iniJue()">
        
      <svg style="background: black" height="400" width="400">
        <circle cx="200" cy="200" r="180" stroke="brown" stroke-width="24" fill="silver" />
        <text id="logoIni" x="50" y="240" fill="indigo">PUSH</text>
      </svg>
        
    </button>
    </div>
    
    <!-- Inicia pruebaaaaaaaaaaaaaaaaaaaaaaaaa -->
  
    <video autoplay id="video"></video>
  <canvas id="canvas"></canvas>

  <script>
    const canvas = document.querySelector('#canvas');
    let context = canvas.getContext('2d');

    const video = document.querySelector('#video');
    const constraints = {
      video: {
        //16:9 aspect ratio
         /*width: {
          ideal: 640//320//256
          /*min: 1280,
          ideal: 1920,
          max: 2560,*
        },
        height: {
          ideal: 480//240//144
          /*min: 720,
          ideal: 1080,
          max: 1440,*
        },*/
        //facingMode: "enviroment"
      },
    };
    
    window.onload = startVideo();
    //canvas.addEventListener("click", scre);
    setInterval(logPixel, 33.33);

    async function startVideo(){
      const videoStream = await navigator.mediaDevices.getUserMedia(constraints);
      video.srcObject = videoStream;
    };

    function scre(){
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      if(canvas.width==0 || canvas.height==0){
        return false;//alert("0's");
      }else{
        context.drawImage(video, 0, 0); 
        return true;
      }
    };
    function logPixel(){
      console.time();
      if(scre()){
        let x = canvas.width;
        let y = canvas.height;
        var data = context.getImageData(x / 2, y / 2, 1, 1).data;
        var rgb = [data[0], data[1], data[2]];

        document.querySelector("body").style.backgroundColor = `rgb(${data[0]}, ${data[1]}, ${data[2]})`;
      }
      console.timeEnd();
    };
  </script>
    
  <!-- Termina pruebaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa -->
    
    
    
    
    <script>
      //alert("Suba el volúmen para sentir escalofríos...");
      const drums = document.getElementById("drums");
      let board = document.getElementById("board");
      //drums.play();
      function inicia(){
        drums.play();
      }
      function para(){
        drums.pause();
      }
      function recarga(){
        drums.load();
      }
      function iniJue(){
        inicia();
        board.innerHTML = `
          <button onclick="inicia()">inicia</button>
          <button onclick="para()">para</button>
          <button onclick="recarga()">recarga</button>
          
          <br>
          <br>
          <p>
            Un texto es una composición de signos codificados en un sistema de escritura que forma una unidad de sentido. 
          </p>
        `;
        //Necesitamos decirle al usuario ode manera cómoda, que suba el volúmen.
      }
    </script>
  </body>
</html>  
